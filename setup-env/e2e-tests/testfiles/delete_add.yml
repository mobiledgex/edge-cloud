##
## To replace the variable {{setupdir}}, execute the script
## with -vars setupdir=/some/directory
##
description: Deletes and creates provisioning, compares to expected values each time.  Assumes system already up 

tests:

- name: delete provisioning
  datafile: "{{setupdir}}/data.yml"
  setupfile:  "{{setupdir}}/setup.yml"
  actions: [delete]

- name: show provisioning, compare to empty
  setupfile:  "{{setupdir}}/setup.yml"
  actions: [show]
  compareyaml:
    yaml1: "{{outputdir}}/show-commands.yml"
    yaml2: "{{setupdir}}/dataempty.yml"

- name: create and show provisioning, compare to expected
  datafile: "{{setupdir}}/data.yml"
  setupfile:  "{{setupdir}}/setup.yml"
  actions: [create,show]
  compareyaml:
    yaml1: "{{outputdir}}/show-commands.yml"
    yaml2: "{{setupdir}}/data.yml"


