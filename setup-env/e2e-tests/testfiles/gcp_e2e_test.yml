tests:
- name: stop and cleanup system
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  actions: [stop,cleanup]

- name: deploy and start services to google cloud 2VM environment
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  actions: [deploy,start]

- name: verify services are running
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  actions: [status]

- name: add and show provisioning
  datafile: ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/data.yml
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  actions: [create,show]

- name: compare results of show provisioning
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  compareyaml: 
    yaml1: "{{outputdir}}/show-commands.yml"
    yaml2: ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/data.yml

- name: compare results which we expect to fail
  setupfile:  ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/setup.yml
  compareyaml:
    yaml1: "{{outputdir}}/show-commands.yml"
    yaml2: ~/go/src/github.com/mobiledgex/edge-cloud/setup-env/setups/gcp_2vm/data_bad.yml
